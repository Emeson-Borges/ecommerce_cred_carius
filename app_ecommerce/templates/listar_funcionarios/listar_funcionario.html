{% include '../home/home.html'%}

{% block title %}Lista de Funcionários{% endblock %}
{% block conteudo %}
<div class="container">
<div class="row">
<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
<div class="card">
<div class="card-body">
  {% if messages %}
    <ul class="messages">
        {% for message in messages %}
            <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>Funcionário alterado com sucesso!</li>
        {% endfor %}
    </ul>
{% endif %}
<h5 class="card-title">Lista de Funcionário</h5>
{% if funcionarios|length > 0 %}
<p class="card-text">
Aqui está a lista de <code>Funcionários</code>
cadastrados.
</p>
<table class="table">
<thead class="thead-dark">
  <tr>
  <th>ID</th>
  <th>Nome</th>
  <th>CPF</th>
  <th>Estado Civil</th>
  <th>Sexo</th>
  <th>Email</th>
  <th>Contato</th>
  <th>Cidade</th>
  </tr>
</thead>
<tbody>
  {% for f in funcionarios %}
  <tr>
  <td>{{ f.id }}</td>
  <td>{{ f.nome }}</td>
  <td>{{ f.cpf }}</td>
  <td>{{ f.estadocivil }}</td>
  <td>{{ f.sexo }}</td>
  <td>{{ f.email}}</td>
  <td>{{ f.contato}}</td>
  <td>{{ f.cidade}}</td>
  <td>
<a href="{% url 'alterar_funcionario' pk=f.id %}"
class="btn btn-info">
Atualizar
</a>
<a class="deletar" href="{% url 'deleta_funcionario' pk=f.id %}"
class="btn btn-outline-danger">
Excluir
</a>
</td>
</tr>
{% endfor %}
</tbody>
</table>
{% else %}
<div class="text-center mt-5 mb-5 jumbotron">
<h5>Nenhum <code>Funcionário</code> cadastrado ainda.</h5>
</div>
{% endif %}
<hr />
<div class="text-right">
<a class="btn btn-primary"
href="{% url 'cadastrar_funcionario' %}">
Cadastrar Funcionário
</a>
</div>
</div>
</div>
</div>
</div>
</div>
<script>
  deletar = document.querySelector('.deletar')

  deletar.addEventListener('click',()=>{
    event.preventDefault(); 

    const confirmacao = confirm('Deseja deletar?');

    if (confirmacao) {
   window.location.href = deletar.href; 
    } 
  })
</script>
{% endblock %}